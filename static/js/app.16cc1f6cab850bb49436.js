webpackJsonp([1],{"2JtP":function(t,e){},"5TXp":function(t,e){},"6oM4":function(t,e){},"8uOL":function(t,e,n){t.exports=n.p+"static/img/emoticon_all.ef2959f.png"},DZsS:function(t,e){},E0sw:function(t,e,n){t.exports=n.p+"static/img/emoticon_smell.54b82f4.png"},GF1L:function(t,e){},Kh9S:function(t,e){},LGwo:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Dd8w"),a=n.n(o),r=n("7+uW"),s=n("w/U7"),i=n("hnaQ"),c=n("NYxO"),l=n("/ocq"),u=n("mvHQ"),d=n.n(u),m=n("Gu7T"),v=n.n(m),p=window.firebase.firestore(),h={name:"login",data:function(){return{newName:"",name:{}}},firestore:{name:p.collection("ACCOUNT").doc("name")},methods:{getName:function(){var t=Math.floor(Math.random()*this.name.random.length);this.newName=this.name.random[t]},login:function(){[].concat(v()(this.name.users)).includes(this.newName)?alert("此暱稱已有人使用囉(｡･ω･｡)"):(this.name.users.push(this.newName),p.collection("ACCOUNT").doc("name").update({users:this.name.users}),this.save("userName",this.newName),this.$router.push("home"))},save:function(t,e){localStorage.setItem(t,d()(e))}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),n("div",{staticClass:"login"},[n("h2",[t._v("你的名字是⋯⋯？")]),t._v(" "),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],staticClass:"name",attrs:{type:"text",placeholder:"輸入暱稱"},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}}),t._v(" "),n("div",{staticClass:"buttonWrap"},[n("button",{staticClass:"random",on:{click:t.getName}})])]),t._v(" "),n("button",{staticClass:"startChat",on:{click:t.login}},[t._v("開始聊天")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logoWrap"},[e("i",{attrs:{id:"logo"}})])}]};var _=n("VU/8")(h,f,!1,function(t){n("GF1L")},"data-v-4b6f7cd0",null).exports,g=window.firebase.firestore(),C={name:"tototalks",data:function(){return{tototalk:[]}},created:function(){var t=this;this.$bind("tototalk",g.collection("TOTOTALK")).then(function(){t.$store.commit("setTotoChat",{totoRooms:t.tototalk.length})})},computed:{sort:function(){return"TotoTalk"===this.$route.name?this.tototalk.slice().sort(function(t,e){return t.length-e.length}):this.tototalk.slice().sort(function(t,e){return e.length-t.length})}},methods:{goChat:function(t){this.$router.push({name:"TotoChat",params:{roomID:t.id}})}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hotWrap"},[n("h2",{domProps:{textContent:t._s("Home"===t.$route.name?"熱門偷偷說":"本日偷偷說")}}),t._v(" "),n("ul",{directives:[{name:"masonry",rawName:"v-masonry"}],staticClass:"hot",attrs:{"item-selector":".hotbox",gutter:"20"}},t._l(t.sort,function(e,o){return n("li",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:o,staticClass:"hotbox",style:{background:e.color},on:{click:function(n){return t.goChat(e)}}},[n("h3",[t._v(t._s(e.title))]),t._v(" "),n("p",[t._v(t._s(e.poster))]),t._v(" "),n("i",[t._v(t._s(e.length))])])}),0)])},staticRenderFns:[]};var b=n("VU/8")(C,T,!1,function(t){n("zI5H")},"data-v-7a64d210",null).exports,x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"addWrap",on:{click:function(e){return t.$router.push("tototalk/totoadd")}}},[n("i",{attrs:{id:"add"}})])},staticRenderFns:[]};var k=n("VU/8")({name:"addPen",data:function(){return{}}},x,!1,function(t){n("jDMr")},"data-v-455885b5",null).exports,$={name:"navbar",data:function(){return{userName:""}},methods:{go:function(t){this.$router.push(t)}},mounted:function(){if(localStorage.getItem("userName")){var t=JSON.parse(localStorage.getItem("userName"));this.userName=t,this.$store.commit("setName",t)}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"nav"},[n("li",{class:{active:"Home"===t.$route.name}},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.go("/home")}}},[t._v("首頁")])]),t._v(" "),n("li",{class:{active:"TodaysTopic"===t.$route.name}},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.go("/todaysTopic")}}},[t._v("本日話題")])]),t._v(" "),n("li",{class:{active:"TotoTalk"===t.$route.name||"TotoChat"===t.$route.name||"TotoAdd"===t.$route.name}},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.go("/tototalk")}}},[t._v("偷偷說")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v(t._s(t.userName))])])])},staticRenderFns:[]};var y=n("VU/8")($,w,!1,function(t){n("6oM4")},"data-v-2abde996",null).exports,N=window.firebase.firestore(),F={name:"home",data:function(){return{topic:[]}},components:{tototalks:b,addPen:k,navbar:y},created:function(){this.$bind("topic",N.collection("TODAYTOPIC").doc("chatRoom"))}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"bk"}),t._v(" "),n("navbar"),t._v(" "),n("div",{staticClass:"content"},[n("h2",[t._v("本日話題")]),t._v(" "),n("div",{staticClass:"today",on:{click:function(e){return t.$router.push("todaystopic")}}},[n("h3",[t._v("#"+t._s(t.topic.todayTitle))]),t._v(" "),n("i",[t._v(t._s(t.topic.length))])]),t._v(" "),n("tototalks")],1),t._v(" "),n("addPen")],1)},staticRenderFns:[]};var E=n("VU/8")(F,O,!1,function(t){n("5TXp")},"data-v-2754396e",null).exports,A={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var D=n("VU/8")({name:"totoTalk",data:function(){return{}}},A,!1,function(t){n("mvhP")},"data-v-0e8c6c42",null).exports,S=window.firebase.firestore(),R={name:"typebar",data:function(){return{text:"",topic:[],length:0,stampSwitch:!1,stamp:[{name:"all",imgUrl:n("8uOL")},{name:"bird",imgUrl:n("WDlm")},{name:"smell",imgUrl:n("E0sw")}]}},created:function(){var t=this,e=this;"TodaysTopic"===this.$route.name?this.$bind("topic",S.collection("TODAYTOPIC").doc("chatRoom")).then(function(n){e.$store.commit("setTopic",{length:n.length,todayTitle:n.todayTitle}),t.length=n.length}):this.$bind("roomInfo",S.collection("TOTOTALK").doc(this.$route.params.roomID)).then(function(n){e.$store.commit("setTotoChat",{length:n.length,color:n.color,title:n.title,poster:n.poster}),t.length=n.length})},methods:{sendMessage:function(t,e){if(""!==this.text||"text"!==t){var n="TodaysTopic"===this.$route.name?"TODAYTOPIC":"TOTOTALK",o="TodaysTopic"===this.$route.name?"chatRoom":this.$route.params.roomID,a="text"===t?{sender:this.$store.state.userName,text:this.text}:{sender:this.$store.state.userName,stamp:e};this.length+=1,S.collection(n).doc(o).update({length:this.length}),S.collection(n).doc(o).collection("MESSAGE").doc("message"+this.covertor(this.length)).set(a),this.text="",this.stampSwitch=!1}},covertor:function(t){return t<10?"00"+String(t):t<100?"0"+String(t):String(t)},alert:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){alert("此功能尚未開放")})}},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"typeBox",class:{stampOpen:t.stampSwitch}},[n("i",{attrs:{id:"image"},on:{click:t.alert}}),t._v(" "),n("i",{attrs:{id:"stamp"},on:{click:function(e){t.stampSwitch=!t.stampSwitch}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text"},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage("text")},input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),n("i",{attrs:{id:"send"},on:{click:function(e){return t.sendMessage("text")}}}),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.stampSwitch?n("div",{staticClass:"stampBox"},t._l(t.stamp,function(e,o){return n("img",{key:o,attrs:{src:e.imgUrl},on:{click:function(n){return t.sendMessage("stamp",e.name)}}})}),0):t._e()])],1)},staticRenderFns:[]};var U=n("VU/8")(R,P,!1,function(t){n("jVTs")},"data-v-e72eb348",null).exports,I=window.firebase.firestore(),V={name:"chatContent",data:function(){return{msg:[],name:[]}},firestore:{name:I.collection("ACCOUNT").doc("name")},created:function(){"TodaysTopic"===this.$route.name?this.$bind("msg",I.collection("TODAYTOPIC").doc("chatRoom").collection("MESSAGE")):this.$bind("msg",I.collection("TOTOTALK").doc(this.$route.params.roomID).collection("MESSAGE"))},methods:{imgConvertor:function(t){return n("RDJV")("./emoticon_"+t+".png")}},watch:{msg:function(){var t=this;this.$nextTick(function(){t.$refs.content.scrollTop=t.$refs.content.scrollHeight})}}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"content",staticClass:"content",class:{totostyle:"TotoChat"===t.$route.name}},[n("ul",t._l(t.msg,function(e,o){return n("li",{key:o,class:{me:e.sender===t.$store.state.userName,blue:(t.name.users.indexOf(e.sender)+1)%4==2,purple:(t.name.users.indexOf(e.sender)+1)%4==3,green:(t.name.users.indexOf(e.sender)+1)%4==0}},[n("p",{staticClass:"account"},[t._v(t._s(e.sender))]),t._v(" "),e.text?n("div",{staticClass:"talkbox"},[n("h3",[t._v(t._s(e.text))])]):t._e(),t._v(" "),e.stamp?n("img",{attrs:{src:t.imgConvertor(e.stamp),alt:""}}):t._e()])}),0)])},staticRenderFns:[]};var L=n("VU/8")(V,M,!1,function(t){n("Kh9S")},"data-v-6bf60ecd",null).exports,H={name:"todaysTopic",data:function(){return{}},components:{navbar:y,typebar:U,chatContent:L}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("navbar"),t._v(" "),n("div",{staticClass:"today"},[n("h3",[t._v("#"+t._s(t.$store.state.topic.todayTitle))]),t._v(" "),n("i",{attrs:{id:"commentIcon"}},[t._v(t._s(t.$store.state.topic.length))])]),t._v(" "),n("chatContent"),t._v(" "),n("typebar")],1)},staticRenderFns:[]};var G=n("VU/8")(H,W,!1,function(t){n("2JtP")},"data-v-203deeb8",null).exports,J={name:"totoChat",data:function(){return{isClose:!0}},components:{navbar:y,typebar:U,chatContent:L}},K={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("navbar"),t._v(" "),n("div",{staticClass:"tototalk",class:{close:t.isClose},style:{background:t.$store.state.toto.color},on:{click:function(e){t.isClose=!t.isClose}}},[n("h3",[t._v(t._s(t.$store.state.toto.title))]),t._v(" "),n("p",{staticClass:"account"},[t._v(t._s(t.$store.state.toto.poster))]),t._v(" "),n("i",{attrs:{id:"commentIcon"}},[t._v(t._s(t.$store.state.toto.length))]),t._v(" "),n("i",{attrs:{id:"arrow"}})]),t._v(" "),n("chatContent"),t._v(" "),n("typebar")],1)},staticRenderFns:[]};var j=n("VU/8")(J,K,!1,function(t){n("LGwo")},"data-v-bddf76b8",null).exports,q={name:"totoHome",data:function(){return{}},components:{tototalks:b,addPen:k,navbar:y}},Y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"bk"}),this._v(" "),e("navbar"),this._v(" "),e("div",{staticClass:"content"},[e("tototalks")],1),this._v(" "),e("addPen")],1)},staticRenderFns:[]};var Z=n("VU/8")(q,Y,!1,function(t){n("NgtZ")},"data-v-3765c00a",null).exports,z=window.firebase.firestore(),B={name:"TotoAdd",data:function(){return{text:"",radio:"#AFCAFF"}},components:{navbar:y},methods:{addToto:function(){if(""!==this.text)if(this.text.length>100)alert("你的偷偷說太長了會被發現Σ(ﾟдﾟ)！");else{var t=this.convertor(this.$store.state.toto.totoRooms+1);z.collection("TOTOTALK").doc("toto"+t).set({color:this.radio,length:0,poster:this.$store.state.userName,roomID:t,title:this.text}),this.$router.replace("/tototalk")}},convertor:function(t){return t<10?"0"+String(t):t}}},Q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("navbar"),t._v(" "),n("div",{staticClass:"bk"}),t._v(" "),n("div",{staticClass:"content"},[n("h2",[t._v("想說什麼⋯⋯？")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{placeholder:"偷偷輸入你想說的話吧(ゝ∀･)b",maxlength:"150"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),n("div",{staticClass:"colorbar"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.radio,expression:"radio"}],attrs:{type:"radio",name:"color",value:"#AFCAFF",id:"blue"},domProps:{checked:t._q(t.radio,"#AFCAFF")},on:{change:function(e){t.radio="#AFCAFF"}}}),t._v(" "),n("label",{staticClass:"blue",attrs:{for:"blue"}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.radio,expression:"radio"}],attrs:{type:"radio",name:"color",value:"#F3E171",id:"yellow"},domProps:{checked:t._q(t.radio,"#F3E171")},on:{change:function(e){t.radio="#F3E171"}}}),t._v(" "),n("label",{staticClass:"yellow",attrs:{for:"yellow"}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.radio,expression:"radio"}],attrs:{type:"radio",name:"color",value:"#F6C2C2",id:"pink"},domProps:{checked:t._q(t.radio,"#F6C2C2")},on:{change:function(e){t.radio="#F6C2C2"}}}),t._v(" "),n("label",{staticClass:"pink",attrs:{for:"pink"}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.radio,expression:"radio"}],attrs:{type:"radio",name:"color",value:"#E8CDF3",id:"purple"},domProps:{checked:t._q(t.radio,"#E8CDF3")},on:{change:function(e){t.radio="#E8CDF3"}}}),t._v(" "),n("label",{staticClass:"purple",attrs:{for:"purple"}})]),t._v(" "),n("button",{staticClass:"submit",on:{click:t.addToto}},[t._v("發送")])])],1)},staticRenderFns:[]};var X=n("VU/8")(B,Q,!1,function(t){n("yWMk")},"data-v-0380bf4f",null).exports;r.a.use(l.a);var tt=new l.a({routes:[{path:"*",component:_},{path:"/",name:"Login",component:_},{path:"/home",name:"Home",component:E},{path:"/tototalk",component:D,children:[{path:"",name:"TotoTalk",component:Z},{path:"totochat/:roomID",name:"TotoChat",component:j},{path:"totoadd",name:"TotoAdd",component:X}]},{path:"/todaystopic",name:"TodaysTopic",component:G}]}),et={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var nt=n("VU/8")({name:"App"},et,!1,function(t){n("DZsS")},null,null).exports;r.a.config.productionTip=!1,r.a.use(s.a),r.a.use(i.a),r.a.use(c.a);var ot=new c.a.Store({state:{userName:"Register",toto:{},topic:{}},mutations:{setName:function(t,e){t.userName=e},setTotoChat:function(t,e){var n=a()({},t.toto,e);t.toto=n},setTopic:function(t,e){t.topic=e}}});tt.beforeEach(function(t,e,n){null===e.name&&"TotoAdd"===t.name&&n("/home"),n()}),new r.a({el:"#app",router:tt,store:ot,components:{App:nt},template:"<App/>"})},NgtZ:function(t,e){},RDJV:function(t,e,n){var o={"./emoticon_all.png":"8uOL","./emoticon_bird.png":"WDlm","./emoticon_smell.png":"E0sw"};function a(t){return n(r(t))}function r(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(o)},a.resolve=r,t.exports=a,a.id="RDJV"},WDlm:function(t,e,n){t.exports=n.p+"static/img/emoticon_bird.64205e0.png"},jDMr:function(t,e){},jVTs:function(t,e){},mvhP:function(t,e){},yWMk:function(t,e){},zI5H:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.16cc1f6cab850bb49436.js.map