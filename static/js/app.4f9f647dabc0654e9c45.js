webpackJsonp([1],{"/0jI":function(t,e){},"0QCs":function(t,e){},"6itT":function(t,e){},"8uOL":function(t,e,a){t.exports=a.p+"static/img/emoticon_all.ef2959f.png"},"912+":function(t,e){},E0sw:function(t,e,a){t.exports=a.p+"static/img/emoticon_smell.54b82f4.png"},"Gil+":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("7+uW"),n=a("w/U7"),s=a("hnaQ"),i=a("mtWM"),r=a.n(i),c=a("Rf8U"),u=a.n(c),m=a("HI0L"),l=a.n(m),d=a("/ocq"),p={name:"login",data:function(){return{newName:""}},methods:{getRandomName:function(){var t=this;this.axios.get("https://thef2e-chatroom.herokuapp.com/api/name").then(function(e){t.newName=e.data})},login:function(){var t=this;this.axios.post("https://thef2e-chatroom.herokuapp.com/api/login",{username:this.newName}).then(function(e){e.data.success?(t.$store.commit("setName",t.newName),t.$router.push("home")):alert("此暱稱已有人使用囉(｡･ω･｡)")})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),a("div",{staticClass:"login"},[a("h2",[t._v("你的名字是⋯⋯？")]),t._v(" "),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],staticClass:"name",attrs:{type:"text",placeholder:"輸入暱稱"},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}}),t._v(" "),a("div",{staticClass:"buttonWrap",on:{click:t.getRandomName}},[a("button",{staticClass:"random"})])]),t._v(" "),a("button",{staticClass:"startChat",on:{click:t.login}},[t._v("開始聊天")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logoWrap"},[e("i",{attrs:{id:"logo"}})])}]};var v=a("VU/8")(p,h,!1,function(t){a("xqnB")},"data-v-2509e89d",null).exports,f={name:"tototalks",data:function(){return{tototalk:[]}},created:function(){var t=this;this.axios.get("https://thef2e-chatroom.herokuapp.com/api/roomlist?type=tototalk").then(function(e){t.tototalk=e.data})},computed:{sort:function(){return"TotoTalk"===this.$route.name?this.tototalk.slice().sort(function(t,e){return+new Date(e.created_time)-+new Date(t.created_time)}):this.tototalk.slice().sort(function(t,e){return e.message_qty-t.message_qty})}},methods:{goChat:function(t){this.$router.push({name:"TotoChat",params:{roomID:t}})}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hotWrap"},[a("h2",{domProps:{textContent:t._s("Home"===t.$route.name?"熱門偷偷說":"本日偷偷說")}}),t._v(" "),a("ul",{directives:[{name:"masonry",rawName:"v-masonry"}],staticClass:"hot",attrs:{"item-selector":".hotbox",gutter:"20"}},t._l(t.sort,function(e,o){return a("li",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:o,staticClass:"hotbox",style:{background:e.color},on:{click:function(a){return t.goChat(e.room_id)}}},[a("h3",[t._v(t._s(e.title))]),t._v(" "),a("p",[t._v(t._s(e.poster))]),t._v(" "),a("i",[t._v(t._s(e.message_qty))])])}),0)])},staticRenderFns:[]};var g=a("VU/8")(f,_,!1,function(t){a("qDeX")},"data-v-67af41ae",null).exports,k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addWrap",on:{click:function(e){return t.$router.push("/tototalk/totoadd")}}},[a("i",{attrs:{id:"add"}})])},staticRenderFns:[]};var x=a("VU/8")({name:"addPen",data:function(){return{}}},k,!1,function(t){a("uk6P")},"data-v-a51843bc",null).exports,C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav"},[a("li",{class:{active:"Home"===t.$route.name||"AdminHome"===t.$route.name},on:{click:function(e){return e.preventDefault(),t.go("/home")}}},[a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v(t._s(t.isAdmin?"使用者":"首頁"))])]),t._v(" "),a("li",{class:{active:"TodaysTopic"===t.$route.name||"AdminTopic"===t.$route.name},on:{click:function(e){return e.preventDefault(),t.go("/todaysTopic")}}},[a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v("本日話題")])]),t._v(" "),a("li",{class:{active:"TotoTalk"===t.$route.name||"TotoChat"===t.$route.name||"TotoAdd"===t.$route.name||"AdminToto"===t.$route.name},on:{click:function(e){return e.preventDefault(),t.go("/tototalk/totohome")}}},[a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v("偷偷說")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v(t._s(t.$store.state.userName))])])])},staticRenderFns:[]};var w=a("VU/8")({name:"navbar",data:function(){return{isAdmin:!1}},created:function(){this.$route.name.toLowerCase().includes("admin")&&(this.isAdmin=!0,this.$store.commit("setName","Admin"))},methods:{go:function(t){this.isAdmin?this.$router.push("/admin"+t):this.$router.push(t)}}},C,!1,function(t){a("Gil+")},"data-v-5486e852",null).exports,y={name:"home",data:function(){return{topic:[]}},components:{tototalks:g,addPen:x,navbar:w},created:function(){var t=this;this.axios.get("https://thef2e-chatroom.herokuapp.com/api/roomlist?type=days_topic").then(function(e){t.topic=e.data[0]})}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"bk"}),t._v(" "),a("navbar"),t._v(" "),a("div",{staticClass:"content"},[a("h2",[t._v("本日話題")]),t._v(" "),a("div",{staticClass:"today",on:{click:function(e){return t.$router.push("/todaysTopic")}}},[a("h3",[t._v(t._s("#"+t.topic.title))]),t._v(" "),a("i",[t._v(t._s(t.topic.message_qty))])]),t._v(" "),a("tototalks")],1),t._v(" "),a("addPen")],1)},staticRenderFns:[]};var T=a("VU/8")(y,b,!1,function(t){a("W40f")},"data-v-7529c33e",null).exports,$={name:"typebar",data:function(){return{text:"",topic:[],stampSwitch:!1,stamp:[{name:"all",imgUrl:a("8uOL")},{name:"bird",imgUrl:a("WDlm")},{name:"smell",imgUrl:a("E0sw")}]}},created:function(){this.getRoomInfo()},methods:{getRoomInfo:function(){var t=this;"TodaysTopic"===this.$route.name?this.axios.get("https://thef2e-chatroom.herokuapp.com/api/roomlist?type=days_topic").then(function(e){t.$store.commit("setTopic",{length:e.data[0].message_qty,todayTitle:e.data[0].title})}):this.axios.get("https://thef2e-chatroom.herokuapp.com/api/roomlist?type=tototalk&roomid="+this.$route.params.roomID).then(function(e){t.$store.commit("setTotoChat",{length:e.data[0].message_qty,title:e.data[0].title,color:e.data[0].color,poster:e.data[0].poster})})},sendMessage:function(t,e){if(""!==this.text||"text"!==t){var a={sender:this.$store.state.userName},o="TodaysTopic"===this.$route.name?"getTopicMessage":"getTotoMessage";"text"===t?a.text=this.text:a.stamp=e,this.$route.params.roomID&&(a.room_id=this.$route.params.roomID),this.$socket.emit(o,a),this.text="",this.stampSwitch=!1}},alert:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){alert("此功能尚未開放")})}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"typeBox",class:{stampOpen:t.stampSwitch}},[a("i",{attrs:{id:"image"},on:{click:t.alert}}),t._v(" "),a("i",{attrs:{id:"stamp"},on:{click:function(e){t.stampSwitch=!t.stampSwitch}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text"},domProps:{value:t.text},on:{keypress:function(e){return e.type.indexOf("key")||13===e.keyCode?t.sendMessage("text"):null},input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),a("i",{attrs:{id:"send"},on:{click:function(e){return t.sendMessage("text")}}}),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.stampSwitch?a("div",{staticClass:"stampBox"},t._l(t.stamp,function(e,o){return a("img",{key:o,attrs:{src:e.imgUrl},on:{click:function(a){return t.sendMessage("stamp",e.name)}}})}),0):t._e()])],1)},staticRenderFns:[]};var N=a("VU/8")($,D,!1,function(t){a("/0jI")},"data-v-890a074c",null).exports,A={name:"chatContent",data:function(){return{msg:[],name:[]}},created:function(){this.getMessage()},methods:{getMessage:function(){var t=this,e="",a="";"TodaysTopic"===this.$route.name?(a="https://thef2e-chatroom.herokuapp.com/api/message?type=daystopic",e="getTopicMessage"):(a="https://thef2e-chatroom.herokuapp.com/api/message?type=tototalk&roomid="+this.$route.params.roomID,e="getTotoMessage"),this.axios.get(a).then(function(a){t.msg=a.data,t.name=a.data.map(function(t){return t.sender}),t.sockets.subscribe(e,function(e){t.msg.push(e)})})},imgConvertor:function(t){return a("RDJV")("./emoticon_"+t+".png")}},watch:{msg:function(){var t=this;this.$nextTick(function(){t.$refs.content.scrollTop=t.$refs.content.scrollHeight})}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content",class:{totostyle:"TotoChat"===t.$route.name}},[a("ul",{ref:"content"},t._l(t.msg,function(e,o){return a("li",{key:o,class:{me:e.sender===t.$store.state.userName,blue:(t.name.indexOf(e.sender)+1)%4==2,purple:(t.name.indexOf(e.sender)+1)%4==3,green:(t.name.indexOf(e.sender)+1)%4==0}},[a("p",{staticClass:"account"},[t._v(t._s(e.sender))]),t._v(" "),e.text?a("div",{staticClass:"talkbox"},[a("h3",[t._v(t._s(e.text))])]):t._e(),t._v(" "),e.stamp?a("img",{attrs:{src:t.imgConvertor(e.stamp),alt:""}}):t._e()])}),0)])},staticRenderFns:[]};var F=a("VU/8")(A,L,!1,function(t){a("ZkIc")},"data-v-d9025dda",null).exports,E={name:"todaysTopic",data:function(){return{}},components:{navbar:w,typebar:N,chatContent:F}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"todaysTopic"}},[a("navbar"),t._v(" "),a("div",{staticClass:"today"},[a("h3",[t._v("#"+t._s(t.$store.state.topic.todayTitle))]),t._v(" "),a("i",{attrs:{id:"commentIcon"}},[t._v(t._s(t.$store.state.topic.length))])]),t._v(" "),a("chatContent"),t._v(" "),a("typebar")],1)},staticRenderFns:[]};var R=a("VU/8")(E,M,!1,function(t){a("YNZi")},"data-v-375c9cd8",null).exports,U={name:"totoChat",data:function(){return{isClose:!0}},components:{navbar:w,typebar:N,chatContent:F}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"totochat"}},[a("navbar"),t._v(" "),a("div",{staticClass:"tototalk",class:{close:t.isClose},style:{background:t.$store.state.toto.color},on:{click:function(e){t.isClose=!t.isClose}}},[a("h3",[t._v(t._s(t.$store.state.toto.title))]),t._v(" "),a("p",{staticClass:"account"},[t._v(t._s(t.$store.state.toto.poster)+"\n      "),a("i",{attrs:{id:"commentIcon"}},[t._v(t._s(t.$store.state.toto.length))])]),t._v(" "),a("i",{attrs:{id:"arrow"}})]),t._v(" "),a("chatContent"),t._v(" "),a("typebar")],1)},staticRenderFns:[]};var I=a("VU/8")(U,P,!1,function(t){a("ujZv")},"data-v-71410e3a",null).exports,V={name:"totoHome",data:function(){return{}},components:{tototalks:g,addPen:x,navbar:w}},q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"bk"}),this._v(" "),e("navbar"),this._v(" "),e("div",{staticClass:"content"},[e("tototalks")],1),this._v(" "),e("addPen")],1)},staticRenderFns:[]};var W=a("VU/8")(V,q,!1,function(t){a("mumm")},"data-v-3765c00a",null).exports,H={name:"TotoAdd",data:function(){return{text:"",radio:"#AFCAFF"}},components:{navbar:w},methods:{addToto:function(){var t=this;""!==this.text&&(this.text.length>100?alert("你的偷偷說太長了會被發現Σ(ﾟдﾟ)！"):this.axios.post("https://thef2e-chatroom.herokuapp.com/api/addtoto",{color:this.radio,poster:this.$store.state.userName,title:this.text}).then(function(e){e.data.success?(t.text="",t.$router.replace("/tototalk/totohome")):alert(e.data.success)}))}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navbar"),t._v(" "),a("div",{staticClass:"bk"}),t._v(" "),a("div",{staticClass:"content"},[a("h2",[t._v("想說什麼⋯⋯？")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{placeholder:"偷偷輸入你想說的話吧(ゝ∀･)b",maxlength:"100"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),a("div",{staticClass:"colorbar"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.radio,expression:"radio"}],attrs:{type:"radio",name:"color",value:"#AFCAFF",id:"blue"},domProps:{checked:t._q(t.radio,"#AFCAFF")},on:{change:function(e){t.radio="#AFCAFF"}}}),t._v(" "),a("label",{staticClass:"blue",attrs:{for:"blue"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.radio,expression:"radio"}],attrs:{type:"radio",name:"color",value:"#F3E171",id:"yellow"},domProps:{checked:t._q(t.radio,"#F3E171")},on:{change:function(e){t.radio="#F3E171"}}}),t._v(" "),a("label",{staticClass:"yellow",attrs:{for:"yellow"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.radio,expression:"radio"}],attrs:{type:"radio",name:"color",value:"#F6C2C2",id:"pink"},domProps:{checked:t._q(t.radio,"#F6C2C2")},on:{change:function(e){t.radio="#F6C2C2"}}}),t._v(" "),a("label",{staticClass:"pink",attrs:{for:"pink"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.radio,expression:"radio"}],attrs:{type:"radio",name:"color",value:"#E8CDF3",id:"purple"},domProps:{checked:t._q(t.radio,"#E8CDF3")},on:{change:function(e){t.radio="#E8CDF3"}}}),t._v(" "),a("label",{staticClass:"purple",attrs:{for:"purple"}})]),t._v(" "),a("button",{staticClass:"submit",on:{click:t.addToto}},[t._v("發送")])])],1)},staticRenderFns:[]};var S=a("VU/8")(H,O,!1,function(t){a("912+")},"data-v-73860326",null).exports,Z={name:"AdminIndex",components:{navbar:w},data:function(){return{}}},j={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"adminIndex"}},[e("navbar"),this._v(" "),e("div",{staticClass:"bk"}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var B=a("VU/8")(Z,j,!1,function(t){a("Ri6n")},"data-v-d329e702",null).exports,J={name:"adminHome",data:function(){return{firstname:"",lastname:"",nameList:[],userList:[]}},created:function(){this.getList("name"),this.getList("user")},methods:{addName:function(){var t=this;""!==this.firstname&&""!==this.lastname&&this.axios.post("https://thef2e-chatroom.herokuapp.com/api/admin/name",{firstname:this.firstname,lastname:this.lastname}).then(function(){t.firstname="",t.lastname="",t.getList("name")})},getList:function(t){var e=this;this.axios.get("https://thef2e-chatroom.herokuapp.com/api/admin/"+t).then(function(a){e[t+"List"]=a.data})},removeName:function(t,e){if("user"!==e||confirm("確定要移除使用者嗎？")){var a=this;this.axios.delete("https://thef2e-chatroom.herokuapp.com/api/admin/"+e+"/"+t).then(function(t){t.data.success?a.getList(e):alert(t.data.message)})}}},filters:{timeConvertor:function(t){var e=+new Date;e-=288e5;var a=new Date(t.replace(/-/g,"/").replace(/T/g," ").replace(/Z/,""));return e-a<6e4?Math.floor((e-a)/1e3)+"秒":e-a<36e5?Math.floor((e-a)/6e4)+"分":e-a<864e5?Math.floor((e-a)/36e5)+"小時"+Math.floor((e-a)%36e5/6e4)+"分":Math.floor((e-a)/864e5)+"天"+Math.floor((e-a)%864e5/36e5)+"小時"}}},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content",attrs:{id:"adminHome"}},[a("div",{staticClass:"wrap name"},[a("h2",[t._v("名字")]),t._v(" "),a("div",{staticClass:"addWrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.firstname,expression:"firstname"}],attrs:{type:"text",placeholder:"請輸入姓氏",maxlength:"5",required:""},domProps:{value:t.firstname},on:{input:function(e){e.target.composing||(t.firstname=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.lastname,expression:"lastname"}],attrs:{type:"text",placeholder:"請輸入名字",required:"",maxlength:"5"},domProps:{value:t.lastname},on:{input:function(e){e.target.composing||(t.lastname=e.target.value)}}}),t._v(" "),a("button",{on:{click:function(e){return e.preventDefault(),t.addName(e)}}},[t._v("加入名字")])]),t._v(" "),a("ul",{staticClass:"list name"},[t._m(0),t._v(" "),t._l(t.nameList,function(e,o){return a("li",{key:o},[a("h3",[t._v(t._s(e.firstname))]),t._v(" "),a("h3",[t._v(t._s(e.lastname))]),t._v(" "),a("button",{on:{click:function(a){return a.preventDefault(),t.removeName(e.name_id,"name")}}},[t._v("刪除")])])})],2)]),t._v(" "),a("div",{staticClass:"wrap user"},[a("h2",[t._v("線上使用者")]),t._v(" "),a("div",{staticClass:"refresh"},[a("button",{on:{click:function(e){return e.preventDefault(),t.getList("user")}}},[t._v("更新")])]),t._v(" "),a("ul",{staticClass:"list user"},[t._m(1),t._v(" "),t._l(t.userList,function(e,o){return a("li",{key:o},[a("h3",[t._v(t._s(e.user_name))]),t._v(" "),a("h3",[t._v(t._s(t._f("timeConvertor")(e.user_login_time)))]),t._v(" "),a("button",{on:{click:function(a){return a.preventDefault(),t.removeName(e.user_id,"user")}}},[t._v("踢除")])])})],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("h3",[this._v("姓氏")]),this._v(" "),e("h3",[this._v("名字")]),this._v(" "),e("h4",[this._v("編輯")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("h3",[this._v("使用者")]),this._v(" "),e("h3",[this._v("上線時間")]),this._v(" "),e("h4",[this._v("編輯")])])}]};var Y=a("VU/8")(J,Q,!1,function(t){a("6itT")},"data-v-d74c7da6",null).exports,G={name:"adminTopic",data:function(){return{topicList:[],newTopic:""}},created:function(){this.getList("topic")},methods:{getList:function(t){var e=this;this.axios.get("https://thef2e-chatroom.herokuapp.com/api/admin/"+t).then(function(a){e[t+"List"]=a.data})},addTopic:function(){var t=this;this.newTopic&&this.axios.post("https://thef2e-chatroom.herokuapp.com/api/admin/topic",{topic:this.newTopic}).then(function(e){e.data.success?(t.newTopic="",t.getList("topic")):alert(e.data.message)})},removeList:function(t,e){if(confirm("確定要刪除主題嗎？")){var a=this;this.axios.delete("https://thef2e-chatroom.herokuapp.com/api/admin/"+e+"/"+t).then(function(t){console.log(t.data),a.getList(e)})}},switchTopic:function(t){var e=this;confirm("確定要切換主題嗎？")&&this.axios.post("https://thef2e-chatroom.herokuapp.com/api/admin/roomlist",{title:t.topic,poster:"admin",type:"days_topic",topicID:t.topic_id}).then(function(t){console.log(t.data),t.data.success?e.getList("topic"):alert(t.data.message)})}},filters:{timeConvertor:function(t){var e=+new Date;e-=288e5;var a=+new Date(t.replace(/-/g,"/").replace(/T/g," ").replace(/Z/,""));return e-a<6e4?Math.floor((e-a)/1e3)+"秒":e-a<36e5?Math.floor((e-a)/6e4)+"分":e-a<864e5?Math.floor((e-a)/36e5)+"小時"+Math.floor((e-a)%36e5/6e4)+"分":Math.floor((e-a)/864e5)+"天"+Math.floor((e-a)%864e5/36e5)+"小時"}}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content",attrs:{id:"adminTopic"}},[a("div",{staticClass:"wrap"},[a("h2",[t._v("主題聊天室")]),t._v(" "),a("div",{staticClass:"addWrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newTopic,expression:"newTopic"}],attrs:{type:"text",placeholder:"請輸入主題",maxlength:"5",required:""},domProps:{value:t.newTopic},on:{input:function(e){e.target.composing||(t.newTopic=e.target.value)}}}),t._v(" "),a("button",{on:{click:function(e){return e.preventDefault(),t.addTopic(e)}}},[t._v("加入主題聊天室")])]),t._v(" "),a("ul",{staticClass:"list"},[t._m(0),t._v(" "),t._l(t.topicList,function(e,o){return a("li",{key:o},[a("h3",[t._v(t._s(e.topic_id))]),t._v(" "),a("h3",[t._v(t._s(e.topic))]),t._v(" "),a("h3",{class:{open:e.is_open,close:!e.is_open}},[t._v(t._s(e.is_open?"使用中":"關閉")+"\n          "),e.created_time?a("span",[t._v(t._s(t._f("timeConvertor")(e.created_time)))]):t._e()]),t._v(" "),a("h4",[a("button",{on:{click:function(a){return a.preventDefault(),t.switchTopic(e)}}},[t._v("切換")]),t._v(" "),a("button",{on:{click:function(a){return a.preventDefault(),t.removeList(e.topic_id,"topic")}}},[t._v("刪除")])])])})],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("h3",[this._v("編號")]),this._v(" "),e("h3",[this._v("主題")]),this._v(" "),e("h3",[this._v("狀態")]),this._v(" "),e("h4",[this._v("編輯")])])}]};var z=a("VU/8")(G,X,!1,function(t){a("WHl/")},"data-v-bc1e99a4",null).exports,K={name:"adminToto",data:function(){return{totoList:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.axios.get("https://thef2e-chatroom.herokuapp.com/api/roomlist?type=tototalk").then(function(e){t.totoList=e.data})},removeRoom:function(t){var e=this;confirm("確定要刪除聊天室嗎？")&&this.axios.delete("https://thef2e-chatroom.herokuapp.com/api/admin/toto/"+t).then(function(t){t.data.success?e.getList():alert(t.data.message)})}},filters:{timeConvertor:function(t){var e=+new Date;e-=288e5;var a=+new Date(t.replace(/-/g,"/").replace(/T/g," ").replace(/Z/,""));return e-a<6e4?Math.floor((e-a)/1e3)+"秒":e-a<36e5?Math.floor((e-a)/6e4)+"分":e-a<864e5?Math.floor((e-a)/36e5)+"小時"+Math.floor((e-a)%36e5/6e4)+"分":Math.floor((e-a)/864e5)+"天"+Math.floor((e-a)%864e5/36e5)+"小時"}}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content",attrs:{id:"adminToto"}},[a("div",{staticClass:"wrap"},[a("h2",[t._v("偷偷說")]),t._v(" "),a("div",{staticClass:"refresh"},[a("button",{on:{click:function(e){return e.preventDefault(),t.getList()}}},[t._v("更新")])]),t._v(" "),a("ul",{staticClass:"list"},[t._m(0),t._v(" "),t._l(t.totoList,function(e,o){return a("li",{key:o},[a("h3",[t._v(t._s(e.room_id))]),t._v(" "),a("h3",[t._v(t._s(e.title))]),t._v(" "),a("h3",[t._v(t._s(e.poster))]),t._v(" "),a("h3",[t._v(t._s(t._f("timeConvertor")(e.created_time)))]),t._v(" "),a("h3",[t._v(t._s(e.message_qty))]),t._v(" "),a("h4",[a("button",{on:{click:function(a){return a.preventDefault(),t.removeRoom(e.room_id)}}},[t._v("刪除")])])])})],2)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("h3",[t._v("ID")]),t._v(" "),a("h3",[t._v("標題")]),t._v(" "),a("h3",[t._v("PO主")]),t._v(" "),a("h3",[t._v("存活時間")]),t._v(" "),a("h3",[t._v("訊息數量")]),t._v(" "),a("h4",[t._v("編輯")])])}]};var et=a("VU/8")(K,tt,!1,function(t){a("hxUD")},"data-v-85c93052",null).exports,at={name:"AdminLogin",data:function(){return{account:"",password:""}},methods:{login:function(){var t=this;this.account&&this.password&&this.axios.post("https://thef2e-chatroom.herokuapp.com/api/admin/login",{account:this.account,password:this.password}).then(function(e){alert(e.data.message),t.account="",t.password="",e.data.success&&t.$router.push("/admin/home")})}}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"adminLogin"}},[a("div",{staticClass:"bk"}),t._v(" "),a("div",{staticClass:"loginWrap"},[a("h2",[t._v("管理員登入")]),t._v(" "),a("label",{attrs:{for:"account"}},[t._v("\n      帳號:\n      "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"text",id:"account"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),t._v(" "),a("label",{attrs:{for:"password"}},[t._v("\n      密碼:\n      "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"text",id:"account"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("button",{on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("送出")])])])},staticRenderFns:[]};var nt=a("VU/8")(at,ot,!1,function(t){a("a+OL")},"data-v-f8fc7548",null).exports;o.a.use(d.a);var st=new d.a({routes:[{path:"*",component:v},{path:"/",name:"Login",component:v},{path:"/home",name:"Home",component:T,meta:{customerAuth:!0}},{path:"/tototalk/totohome",name:"TotoTalk",component:W,meta:{customerAuth:!0}},{path:"/tototalk/totochat/:roomID",name:"TotoChat",component:I,meta:{customerAuth:!0}},{path:"/tototalk/totoadd",name:"TotoAdd",component:S,meta:{customerAuth:!0}},{path:"/todaystopic",name:"TodaysTopic",component:R,meta:{customerAuth:!0}},{path:"/admin/login",name:"AdminLogin",component:nt},{path:"/admin",name:"AdminIndex",component:B,redirect:"/admin/home",children:[{path:"home",name:"AdminHome",component:Y,meta:{adminAuth:!0}},{path:"todaystopic",name:"AdminTopic",component:z,meta:{adminAuth:!0}},{path:"tototalk/totohome",name:"AdminToto",component:et,meta:{adminAuth:!0}}]}]}),it={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var rt=a("VU/8")({name:"App"},it,!1,function(t){a("0QCs")},null,null).exports,ct=a("Dd8w"),ut=a.n(ct),mt=a("NYxO");o.a.use(mt.a);var lt=new mt.a.Store({state:{userName:"Register",toto:{},topic:{}},mutations:{setName:function(t,e){t.userName=e},setTotoChat:function(t,e){var a=ut()({},t.toto,e);t.toto=a},setTopic:function(t,e){t.topic=e}}});o.a.config.productionTip=!1,o.a.use(n.a),o.a.use(s.a),o.a.use(u.a,r.a),r.a.defaults.withCredentials=!0,o.a.use(new l.a({debug:!0,connection:"https://thef2e-chatroom.herokuapp.com"})),st.beforeEach(function(t,e,a){if(null===e.name&&"TotoAdd"===t.name&&a("/home"),t.meta.customerAuth){var o=null===e.name?"refresh":"normal";r.a.get("https://thef2e-chatroom.herokuapp.com/api/loginstatus/"+o).then(function(t){t.data.success?(null===e.name&&lt.commit("setName",t.data.message),a()):(alert("請重新登入"),a("/"))})}if("Login"===t.name){var n=null===e.name?"refresh":"normal";r.a.get("https://thef2e-chatroom.herokuapp.com/api/loginstatus/"+n).then(function(t){t.data.success&&(null===e.name?(lt.commit("setName",t.data.message),alert("登入成功")):alert("您已登入過摟！"),a("/home")),a()})}t.meta.adminAuth&&r.a.get("https://thef2e-chatroom.herokuapp.com/api/admin/login").then(function(t){t.data.success?a():(alert(t.data.message),a("/admin/login"))}),a()}),new o.a({el:"#app",router:st,store:lt,components:{App:rt},template:"<App/>"})},RDJV:function(t,e,a){var o={"./emoticon_all.png":"8uOL","./emoticon_bird.png":"WDlm","./emoticon_smell.png":"E0sw"};function n(t){return a(s(t))}function s(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(o)},n.resolve=s,t.exports=n,n.id="RDJV"},Ri6n:function(t,e){},W40f:function(t,e){},WDlm:function(t,e,a){t.exports=a.p+"static/img/emoticon_bird.64205e0.png"},"WHl/":function(t,e){},YNZi:function(t,e){},ZkIc:function(t,e){},"a+OL":function(t,e){},hxUD:function(t,e){},mumm:function(t,e){},qDeX:function(t,e){},ujZv:function(t,e){},uk6P:function(t,e){},xqnB:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4f9f647dabc0654e9c45.js.map